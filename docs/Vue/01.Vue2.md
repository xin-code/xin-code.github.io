---
title: Vue2
date: 2022-03-24 16:13:37
sticky: false
permalink: /pages/vue2/
categories: 
  - Vue2
tags: 
  - 
author: 
  name: Xin
  link: https://github.com/xin-code
---


此文档帮助我在学习工作中，Vue易混知识点以及部分基础知识进行的梳理总结

<!-- more -->



## 指令

### :star:v-if / v-show

- v-if 

  - v-if="true" 插入元素
  - v-if="false"移除元素
  - 会摧毁整个dom元素整个添加或删除

- v-show

  - v-show="true" 显示
  - v-show="false"隐藏
  - 本质上是为该dom元素添加一个css属性并基于 `display`进行切换

- 消耗方面：v-if有更高的切换消耗，v-show有更高的初始渲染消耗

  （v-if 相比 v-show 开销更大的（因为直接操作dom节点增加与删除））





## import '@...' 中@指代

- @ 等价于 `/src` 这个目录，避免写麻烦又易错的相对路径



## 缩写

```vue
:class 等效于 v-bind:class
@click 等效于 v-on:click
<template #footer 等效于 <template v-slot:footer
```



## .native修饰符的使用

- 在 v-on （@）上使用的修饰符 .native 给子组件绑定一个原生的事件

  ```vue
  @keyup.enter.native="save"  // 回车触发事件 'save'
  @click.native="onClickDetail" // 点击触发事件 'onClickDetail'
  ```

  

## 具名插槽

- 父组件

  - 一个不带 `name` 的 `<slot>` 出口会带有隐含的名字“default”。

  ```vue
  <div class="container">
    <header>
      <slot name="header"></slot>
    </header>
    <main>
      <slot></slot>
    </main>
    <footer>
      <slot name="footer"></slot>
    </footer>
  </div>
  ```

  

- 子组件

  ```vue
  <div>
    <template v-slot:header>
    <!-- 可缩写为#header -->
    <template #header>
      <h1>Here might be a page title</h1>
    </template>
    </template>
  
    <template v-slot:default>
    <!-- 可缩写为#default -->
    <template #default>
      <p>A paragraph for the main content.</p>
      <p>And another one.</p>
    </template>
    </template>
  
    <template v-slot:footer>
    <!-- 可缩写为#footer -->
    <template #footer>
      <p>Here's some contact info</p>
    </template>
    </template>
  </div>
  ```

  



## this.$set( target, key, value )

- 使用场景：向响应式对象新增一个属性，并确保这个新属性同样是响应式的，可以触发视图更新
- 当使用watch方法时，可以用这个触发视图更新

```vue
🌹 target：要更改的数据源(可以是对象或者数组)
🌹 key：要更改的具体数据(index值)
🌹 value ：重新赋的值
```







## 防抖和节流

- 防抖：

  当持续触发事件时，一定时间段内没有再触发事件，事件处理函数才会执行一次，如果设定的时间到来之前，又一次触发了事件，就重新开始延时

- 节流：

  按照设定的时间固定执行一次函数

  


1. 利用lodash中内置的防抖和节流

   - 防抖（点击后最后一次时间的500毫秒后打印一次）

     ```vue
     import debounce from 'lodash/debounce'
     
     methods:{
     	test: debounce(function () {
           console.log(1);
         }, 500),
     }
     ```

   - 节流（每隔500毫秒打印一次）

     ```vue
    import throttle from 'lodash/throttle'
     
     methods:{
     	test: throttle(function () {
           console.log(1);
         }, 500),
     }
     ```
   
     



## 页面监控鼠标点击事件

1. 添加监听

   ```vue
   mounted () {
       window.addEventListener('click', this.handleClick, true);
   },
   ```

2. 方法调用

   ```vue
   methods:{
       //  点击事件
       handleClick(e){
           console.log(e)
       },
   }
   ```

3. 移除监控

   ```vue
     destroyed() {
       window.removeEventListener('click', this.handleClick, true);
     },
   ```




## 下载文件

- 文件流

  ```
      let elink = document.createElement('a');
      elink.download = `${file.name}`;
      elink.style.display = 'none';
      let blob = new Blob([res]);
      elink.href = URL.createObjectURL(blob);
      document.body.appendChild(elink);
      elink.click();
      document.body.removeChild(elink);
  ```

- 文件链接

  ```
        let link = document.createElement('a');
        link.style.display = 'none';
        link.href = 'xxxx.doc';
        link.setAttribute('download', name);
        document.body.appendChild(link);
        link.click();
  ```

  



## mixins

mixins（混入），是一个js对象，它可以包含我们组件中script项中的任意功能选项，如data、components、methods 、created、computed等等。我们只要将共用的功能以对象的方式传入 mixins选项中，当组件使用 mixins对象时所有mixins对象的选项都将被混入该组件本身的选项中来，这样就可以提高代码的重用性，使你的代码保持干净和易于维护。

```vue
<script>
export default {
  props: {
  },
  data () {
    return {
      pagination: {
        list: [], // 分页数据(required)
        currentPage: 1, // 当前页码(required)
        total: 0, // 总数(required)
        pageSize: 50, // 分页数设定值
        size: 0, // 分页数实际值(比如设定pageSize为10，但最后一页只有7条记录，size为7)
        pages: 1, // 总页数
        startRow: 0, // 当前起始索引
        endRow: 0, // 当前结尾索引
      },
    }
  },
  computed: {
  },
  methods: {
    // 公共方法 翻页
    togglePage (page) {
      this.pagination.currentPage = page
      this.query()
    },
    // 公共方法 分页大小修改
    changePageSize (pageSize) {
      this.pagination.pageSize = pageSize
      this.query()
    },
  },
}
</script>
<style lang="scss" rel="stylesheet/scss" scoped>
</style>

```



- 使用

```
<template>
  <div class="flex-column flex-ai-stretch">
    <operation
      @query="query"
      class="flex-none"
    />
    <data-table
      :pagination="pagination"
      @togglePage="togglePage"
      @changePageSize="changePageSize"
      class="flex-auto"
    />
  </div>
</template>

<script>
import PagingData from '@/components/pagination/PagingData'
import Operation from './Operation'
import DataTable from './DataTable'
import * as adApi from '@/api/ad-api/ad'

export default {
  // 混入 PagingData
  mixins: [PagingData],
  components: {
    Operation,
    DataTable,
  },
  props: {},
  data () {
    return {
      queryParams: null,
    }
  },
  computed: {},
  methods: {
    async query (queryParams) {
      if (queryParams) {
        // 查询条件有变动，页码归零
        this.queryParams = queryParams
        this.pagination.currentPage = 1
      }
      // 封装的API方法
      const res = await adApi.listChildren(this.queryParams, this.pagination)
      Object.assign(this.pagination, res)
    },
  },
  watch: {},
  created () {},
}
</script>

<style lang="scss" scoped>

</style>

```

