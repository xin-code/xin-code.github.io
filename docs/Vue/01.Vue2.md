---
title: Vue2
date: 2022-03-24 16:13:37
sticky: false
permalink: /pages/vue2/
categories: 
  - Vue2
tags: 
  - 
author: 
  name: Xin
  link: https://github.com/xin-code
---


æ­¤æ–‡æ¡£å¸®åŠ©æˆ‘åœ¨å­¦ä¹ å·¥ä½œä¸­ï¼ŒVueæ˜“æ··çŸ¥è¯†ç‚¹ä»¥åŠéƒ¨åˆ†åŸºç¡€çŸ¥è¯†è¿›è¡Œçš„æ¢³ç†æ€»ç»“

<!-- more -->



## æŒ‡ä»¤

### :star:v-if / v-show

- v-if 

  - v-if="true" æ’å…¥å…ƒç´ 
  - v-if="false"ç§»é™¤å…ƒç´ 
  - ä¼šæ‘§æ¯æ•´ä¸ªdomå…ƒç´ æ•´ä¸ªæ·»åŠ æˆ–åˆ é™¤

- v-show

  - v-show="true" æ˜¾ç¤º
  - v-show="false"éšè—
  - æœ¬è´¨ä¸Šæ˜¯ä¸ºè¯¥domå…ƒç´ æ·»åŠ ä¸€ä¸ªcsså±æ€§å¹¶åŸºäº `display`è¿›è¡Œåˆ‡æ¢

- æ¶ˆè€—æ–¹é¢ï¼šv-ifæœ‰æ›´é«˜çš„åˆ‡æ¢æ¶ˆè€—ï¼Œv-showæœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“æ¶ˆè€—

  ï¼ˆv-if ç›¸æ¯” v-show å¼€é”€æ›´å¤§çš„ï¼ˆå› ä¸ºç›´æ¥æ“ä½œdomèŠ‚ç‚¹å¢åŠ ä¸åˆ é™¤ï¼‰ï¼‰





## import '@...' ä¸­@æŒ‡ä»£

- @ ç­‰ä»·äº `/src` è¿™ä¸ªç›®å½•ï¼Œé¿å…å†™éº»çƒ¦åˆæ˜“é”™çš„ç›¸å¯¹è·¯å¾„



## ç¼©å†™

```vue
:class ç­‰æ•ˆäº v-bind:class
@click ç­‰æ•ˆäº v-on:click
<template #footer ç­‰æ•ˆäº <template v-slot:footer
```



## .nativeä¿®é¥°ç¬¦çš„ä½¿ç”¨

- åœ¨ v-on ï¼ˆ@ï¼‰ä¸Šä½¿ç”¨çš„ä¿®é¥°ç¬¦ .native ç»™å­ç»„ä»¶ç»‘å®šä¸€ä¸ªåŸç”Ÿçš„äº‹ä»¶

  ```vue
  @keyup.enter.native="save"  // å›è½¦è§¦å‘äº‹ä»¶ 'save'
  @click.native="onClickDetail" // ç‚¹å‡»è§¦å‘äº‹ä»¶ 'onClickDetail'
  ```

  

## å…·åæ’æ§½

- çˆ¶ç»„ä»¶

  - ä¸€ä¸ªä¸å¸¦ `name` çš„ `<slot>` å‡ºå£ä¼šå¸¦æœ‰éšå«çš„åå­—â€œdefaultâ€ã€‚

  ```vue
  <div class="container">
    <header>
      <slot name="header"></slot>
    </header>
    <main>
      <slot></slot>
    </main>
    <footer>
      <slot name="footer"></slot>
    </footer>
  </div>
  ```

  

- å­ç»„ä»¶

  ```vue
  <div>
    <template v-slot:header>
    <!-- å¯ç¼©å†™ä¸º#header -->
    <template #header>
      <h1>Here might be a page title</h1>
    </template>
    </template>
  
    <template v-slot:default>
    <!-- å¯ç¼©å†™ä¸º#default -->
    <template #default>
      <p>A paragraph for the main content.</p>
      <p>And another one.</p>
    </template>
    </template>
  
    <template v-slot:footer>
    <!-- å¯ç¼©å†™ä¸º#footer -->
    <template #footer>
      <p>Here's some contact info</p>
    </template>
    </template>
  </div>
  ```

  



## this.$set( target, key, value )

- ä½¿ç”¨åœºæ™¯ï¼šå‘å“åº”å¼å¯¹è±¡æ–°å¢ä¸€ä¸ªå±æ€§ï¼Œå¹¶ç¡®ä¿è¿™ä¸ªæ–°å±æ€§åŒæ ·æ˜¯å“åº”å¼çš„ï¼Œå¯ä»¥è§¦å‘è§†å›¾æ›´æ–°
- å½“ä½¿ç”¨watchæ–¹æ³•æ—¶ï¼Œå¯ä»¥ç”¨è¿™ä¸ªè§¦å‘è§†å›¾æ›´æ–°

```vue
ğŸŒ¹ targetï¼šè¦æ›´æ”¹çš„æ•°æ®æº(å¯ä»¥æ˜¯å¯¹è±¡æˆ–è€…æ•°ç»„)
ğŸŒ¹ keyï¼šè¦æ›´æ”¹çš„å…·ä½“æ•°æ®(indexå€¼)
ğŸŒ¹ value ï¼šé‡æ–°èµ‹çš„å€¼
```







## é˜²æŠ–å’ŒèŠ‚æµ

- é˜²æŠ–ï¼š

  å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¸€å®šæ—¶é—´æ®µå†…æ²¡æœ‰å†è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœè®¾å®šçš„æ—¶é—´åˆ°æ¥ä¹‹å‰ï¼Œåˆä¸€æ¬¡è§¦å‘äº†äº‹ä»¶ï¼Œå°±é‡æ–°å¼€å§‹å»¶æ—¶

- èŠ‚æµï¼š

  æŒ‰ç…§è®¾å®šçš„æ—¶é—´å›ºå®šæ‰§è¡Œä¸€æ¬¡å‡½æ•°

  


1. åˆ©ç”¨lodashä¸­å†…ç½®çš„é˜²æŠ–å’ŒèŠ‚æµ

   - é˜²æŠ–ï¼ˆç‚¹å‡»åæœ€åä¸€æ¬¡æ—¶é—´çš„500æ¯«ç§’åæ‰“å°ä¸€æ¬¡ï¼‰

     ```vue
     import debounce from 'lodash/debounce'
     
     methods:{
     	test: debounce(function () {
           console.log(1);
         }, 500),
     }
     ```

   - èŠ‚æµï¼ˆæ¯éš”500æ¯«ç§’æ‰“å°ä¸€æ¬¡ï¼‰

     ```vue
    import throttle from 'lodash/throttle'
     
     methods:{
     	test: throttle(function () {
           console.log(1);
         }, 500),
     }
     ```
   
     



## é¡µé¢ç›‘æ§é¼ æ ‡ç‚¹å‡»äº‹ä»¶

1. æ·»åŠ ç›‘å¬

   ```vue
   mounted () {
       window.addEventListener('click', this.handleClick, true);
   },
   ```

2. æ–¹æ³•è°ƒç”¨

   ```vue
   methods:{
       //  ç‚¹å‡»äº‹ä»¶
       handleClick(e){
           console.log(e)
       },
   }
   ```

3. ç§»é™¤ç›‘æ§

   ```vue
     destroyed() {
       window.removeEventListener('click', this.handleClick, true);
     },
   ```




## ä¸‹è½½æ–‡ä»¶

- æ–‡ä»¶æµ

  ```
      let elink = document.createElement('a');
      elink.download = `${file.name}`;
      elink.style.display = 'none';
      let blob = new Blob([res]);
      elink.href = URL.createObjectURL(blob);
      document.body.appendChild(elink);
      elink.click();
      document.body.removeChild(elink);
  ```

- æ–‡ä»¶é“¾æ¥

  ```
        let link = document.createElement('a');
        link.style.display = 'none';
        link.href = 'xxxx.doc';
        link.setAttribute('download', name);
        document.body.appendChild(link);
        link.click();
  ```

  



## mixins

mixinsï¼ˆæ··å…¥ï¼‰ï¼Œæ˜¯ä¸€ä¸ªjså¯¹è±¡ï¼Œå®ƒå¯ä»¥åŒ…å«æˆ‘ä»¬ç»„ä»¶ä¸­scripté¡¹ä¸­çš„ä»»æ„åŠŸèƒ½é€‰é¡¹ï¼Œå¦‚dataã€componentsã€methods ã€createdã€computedç­‰ç­‰ã€‚æˆ‘ä»¬åªè¦å°†å…±ç”¨çš„åŠŸèƒ½ä»¥å¯¹è±¡çš„æ–¹å¼ä¼ å…¥ mixinsé€‰é¡¹ä¸­ï¼Œå½“ç»„ä»¶ä½¿ç”¨ mixinså¯¹è±¡æ—¶æ‰€æœ‰mixinså¯¹è±¡çš„é€‰é¡¹éƒ½å°†è¢«æ··å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ä¸­æ¥ï¼Œè¿™æ ·å°±å¯ä»¥æé«˜ä»£ç çš„é‡ç”¨æ€§ï¼Œä½¿ä½ çš„ä»£ç ä¿æŒå¹²å‡€å’Œæ˜“äºç»´æŠ¤ã€‚

```vue
<script>
export default {
  props: {
  },
  data () {
    return {
      pagination: {
        list: [], // åˆ†é¡µæ•°æ®(required)
        currentPage: 1, // å½“å‰é¡µç (required)
        total: 0, // æ€»æ•°(required)
        pageSize: 50, // åˆ†é¡µæ•°è®¾å®šå€¼
        size: 0, // åˆ†é¡µæ•°å®é™…å€¼(æ¯”å¦‚è®¾å®špageSizeä¸º10ï¼Œä½†æœ€åä¸€é¡µåªæœ‰7æ¡è®°å½•ï¼Œsizeä¸º7)
        pages: 1, // æ€»é¡µæ•°
        startRow: 0, // å½“å‰èµ·å§‹ç´¢å¼•
        endRow: 0, // å½“å‰ç»“å°¾ç´¢å¼•
      },
    }
  },
  computed: {
  },
  methods: {
    // å…¬å…±æ–¹æ³• ç¿»é¡µ
    togglePage (page) {
      this.pagination.currentPage = page
      this.query()
    },
    // å…¬å…±æ–¹æ³• åˆ†é¡µå¤§å°ä¿®æ”¹
    changePageSize (pageSize) {
      this.pagination.pageSize = pageSize
      this.query()
    },
  },
}
</script>
<style lang="scss" rel="stylesheet/scss" scoped>
</style>

```



- ä½¿ç”¨

```
<template>
  <div class="flex-column flex-ai-stretch">
    <operation
      @query="query"
      class="flex-none"
    />
    <data-table
      :pagination="pagination"
      @togglePage="togglePage"
      @changePageSize="changePageSize"
      class="flex-auto"
    />
  </div>
</template>

<script>
import PagingData from '@/components/pagination/PagingData'
import Operation from './Operation'
import DataTable from './DataTable'
import * as adApi from '@/api/ad-api/ad'

export default {
  // æ··å…¥ PagingData
  mixins: [PagingData],
  components: {
    Operation,
    DataTable,
  },
  props: {},
  data () {
    return {
      queryParams: null,
    }
  },
  computed: {},
  methods: {
    async query (queryParams) {
      if (queryParams) {
        // æŸ¥è¯¢æ¡ä»¶æœ‰å˜åŠ¨ï¼Œé¡µç å½’é›¶
        this.queryParams = queryParams
        this.pagination.currentPage = 1
      }
      // å°è£…çš„APIæ–¹æ³•
      const res = await adApi.listChildren(this.queryParams, this.pagination)
      Object.assign(this.pagination, res)
    },
  },
  watch: {},
  created () {},
}
</script>

<style lang="scss" scoped>

</style>

```

