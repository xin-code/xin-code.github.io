---
title: JS创建文件可写流
date: 2023-04-11 10:02:04
permalink: /pages/381f7d/
categories:
  - JavaScript
tags:
  - 
author: 
  name: Xin
  link: https://github.com/xin-code
---



## JavaScript 可把处理数据写入文件内

```javascript
const fs = require('fs')

const writer = fs.createWriteStream('./test.txt', {
    flags: 'a', //如果要把内容追加到文件原有的内容的后面，则设置flags为'a',此时设置start无效
    encoding: 'utf8', // 不写默认是utf8
    autoClose: true, // 写完是否自动关闭
    // start: 0, //从第几个字节开始写
    highWaterMark: 3 // 这是安全线，默认写的水位线是16k，即16 * 1024。表示总共写入的大小
})

//写入数据到流
writer.write('，适合去郊游,', 'utf8')
//再次向文件写入数据，会从当前位置开始写入
writer.write('咱们出发把！', 'utf8')

//关闭写入流，表明已没有数据要被写入可写流
writer.end()

writer.on('open', () => {
    console.log('文件已被打开', writer.pending)
})
writer.on('ready', () => {
    console.log('文件已为写入准备好', writer.pending)
})
writer.on('close', () => {
    console.log('文件已被关闭')
    console.log("总共写入了%d个字节", writer.bytesWritten)
    console.log('写入的文件路径是'+ writer.path)
})


```

