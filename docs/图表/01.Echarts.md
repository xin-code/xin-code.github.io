---
title: Echarts常用方法
date: 2023-01-12 18:16:15
permalink: /pages/97f324/
categories:
  - 图表
tags:
  - 
author: 
  name: Xin
  link: https://github.com/xin-code
---
Echarts常用知识点

<!-- more -->



## 清空 echarts 数据

```echarts
$("#myChart").removeAttr("_echarts_instance_").empty();
```



## 折线图点击空白部分自动吸附对应的点并触发点击事件

```echarts
myChart.getZr().on('mousedown', (params) => {
  console.log(params);
  const pointInPixel = [params.offsetX, params.offsetY];
  if (myChart.containPixel('grid', pointInPixel)) {
    let xIndex = myChart.convertFromPixel({ seriesIndex: 0 }, [
      params.offsetX,
      params.offsetY
    ])[0];
    alert('你点击区域的数据为：'+option.series[0].data[xIndex])
  }
});
```



## 柱状图顶端不展示数值为0的

```echarts
series: [{
	type: 'bar',
	data: datay,
	color: '#5FD990',
	itemStyle: {
		normal: {
			label: {
				show: true, //开启显示
				position: 'top', //在上方显示
				formatter:function(val){
					if(val.value == 0){
						return ""
					}
				},
				textStyle: { //数值样式
					color: 'black',
					fontSize: 12
				}
			}
		}
	}
}]
```



## X轴文字过长设置超出隐藏显示省略号

```echarts
xAxis: [{
	type: 'category',
	data: _this.qyjyNameList,
	// data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
	axisTick: {
		alignWithLabel: true
	},
	axisLabel: {
		interval: 0, // 强制显示所有标签
		rotate: 40,
		// 超过4个字显示省略号
		formatter: function (value) {
			if (value.length > 4) {
				return `${value.slice(0, 4)}...`;
			}
		return value;
		}
	}
}]
```



## 图例 过多 展示翻页(右侧)

```javascript
	legend: {
      x: 'right', // 水平居右
      y: 'center', // 垂直居中
      icon: 'rect', // 图例icon为方块
      backgroundColor: 'transparent',
      itemHeight: 10, // 图例icon高度
      itemWidth: 19, // 图例icon宽度
      height: '90%',
      borderColor: 'rgba(122, 240, 214, 0.5)',
      borderWidth: 1,
      top: 4,
      borderRadius: 4,
      itemGap: 13,
      padding: [5, 10, 10, 10],
      orient: 'vertical', // 垂直排列
      type: 'scroll', // 可滚动翻页的图例
      pageIconSize: 10, //翻页按钮大小
      pageIconColor: '#2C86FF', //翻页箭头颜色
      pageIconInactiveColor: 'rgba(44,132,251,0.40)', //翻页（即翻页到头时箭头的颜色
      pageTextStyle: {
        color: '#999', //翻页数字颜色
      }, //开启tooltip
      tooltip: {
        show: true,
      },
      // 文字大于4个字时，切割字符，加...
      formatter: function (value) {
        if (value.length > 4) {
          return `${value.slice(0, 4)}...`;
        }
        return value;
      },
      textStyle: {
        lineHeight: 13,
      },
      align: 'left', // 图例icon在左侧
      // backgroundColor: 'rgba(23, 109, 118, 0.2)',
      // data: [],
      selector: [
        {
          type: 'all',
          title: '全选',
        },
        {
          type: 'inverse',
          title: '反选',
        },
      ],
      selected: {},
    },
```





## tooltip 过滤为0的数据

```javascript
tooltip: {
      show: true,
      trigger: 'axis',
      confine: true,
      axisPointer: {
        type: 'shadow',
        shadowStyle: {
          color: 'rgba(86, 255, 218, 0.11)',
        },
      },
      formatter: function (params) {
        // 悬浮文字信息
        let str = `${params[0].name}日`;
        params.map((item) => {
          if (item.data !== 0) {
            str += `<br>${item.marker}${item.seriesName}<span style="float:right;font-weight:bold">${item.data}</span>`;
          }
        });
        return str;
      },
    },
```





## 玫瑰图 图像按照一个方向展示

通过把data数据 按照从大到小排序一下即可实现

